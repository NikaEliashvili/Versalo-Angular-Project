<div class="create_card_container" *ngIf="IsCardsAdd || IsCardsEdit">
  <div class="card_content">
    <div *ngIf="isLoading || isLoadingOnEdit" class="load_spinner_cont">
      <mat-spinner></mat-spinner>
    </div>
    <form *ngIf="!isLoading && !isLoadingOnEdit" [formGroup]="CardAddForm">
      <div class="form_input_cont">
        <div class="addCard_input_top_row">
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Manufacturer</label>
              <div
                *ngIf="
                  CardAddForm.get('model')?.invalid &&
                  (CardAddForm.get('model')?.dirty ||
                    CardAddForm.get('model')?.touched)
                "
              >
                <mat-error>
                  <span
                    *ngIf="
                      CardAddForm.get('model')?.hasError('required') ||
                      CardAddForm.get('model')?.hasError('invalidModel')
                    "
                    >Manufacturer is required</span
                  >
                </mat-error>
              </div>
            </div>
            <select formControlName="model">
              <option value="carModel" selected>Car Model</option>
              <option
                *ngFor="let model of carList[0]?.carModel"
                [ngValue]="model"
              >
                {{ model | titlecase }}
              </option>
            </select>
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Model</label>
              <div
                *ngIf="
                  CardAddForm.get('serie')?.invalid &&
                  (CardAddForm.get('serie')?.dirty ||
                    CardAddForm.get('serie')?.touched)
                "
              >
                <mat-error>
                  <span *ngIf="CardAddForm.get('serie')?.hasError('required')"
                    >Model is required</span
                  >
                </mat-error>
              </div>
            </div>
            <input formControlName="serie" placeholder="e.g X6" type="text" />
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Category</label>
              <div
                *ngIf="
                  CardAddForm.get('category')?.invalid &&
                  (CardAddForm.get('category')?.dirty ||
                    CardAddForm.get('category')?.touched)
                "
              >
                <mat-error>
                  <span
                    *ngIf="
                      CardAddForm.get('category')?.hasError('required') ||
                      CardAddForm.get('category')?.hasError('invalidCategory')
                    "
                    >Category is required</span
                  >
                </mat-error>
              </div>
            </div>
            <select formControlName="category">
              <option value="carCategory" selected>Car Category</option>
              <option
                *ngFor="let category of carList[0]?.carCategory"
                [ngValue]="category"
              >
                {{ category | titlecase }}
              </option>
            </select>
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Year</label>
              <div
                *ngIf="
                  CardAddForm.get('year')?.invalid &&
                  (CardAddForm.get('year')?.dirty ||
                    CardAddForm.get('year')?.touched)
                "
              >
                <mat-error>
                  <span *ngIf="CardAddForm.get('year')?.hasError('required')"
                    >Year is required</span
                  ><span *ngIf="CardAddForm.get('year')?.hasError('pattern')"
                    >Year form is incorrect</span
                  >
                </mat-error>
              </div>
            </div>
            <select formControlName="year">
              <option *ngFor="let year of carList[0]?.carYear" [ngValue]="year">
                {{ year }}
              </option>
            </select>
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Price</label>
              <div
                *ngIf="
                  CardAddForm.get('price')?.invalid &&
                  (CardAddForm.get('price')?.dirty ||
                    CardAddForm.get('price')?.touched)
                "
              >
                <mat-error>
                  <span *ngIf="CardAddForm.get('price')?.hasError('required')"
                    >Price is required</span
                  >
                  <span *ngIf="CardAddForm.get('price')?.hasError('pattern')"
                    >Price form is incorrect</span
                  >
                </mat-error>
              </div>
            </div>
            <input
              formControlName="price"
              placeholder="e.g $12000"
              type="text"
            />
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">Color</label>
              <div
                *ngIf="
                  CardAddForm.get('color')?.invalid &&
                  (CardAddForm.get('color')?.dirty ||
                    CardAddForm.get('color')?.touched)
                "
              >
                <mat-error>
                  <span *ngIf="CardAddForm.get('color')?.hasError('required')"
                    >Color is required</span
                  >
                </mat-error>
              </div>
            </div>
            <input formControlName="color" placeholder="e.g blue" type="text" />
          </div>
          <div class="input_box">
            <div class="input_title_box">
              <label class="label">GearBox</label>
              <div
                *ngIf="
                  CardAddForm.get('gearBox')?.invalid &&
                  (CardAddForm.get('gearBox')?.dirty ||
                    CardAddForm.get('gearBox')?.touched)
                "
              >
                <mat-error>
                  <span *ngIf="CardAddForm.get('gearBox')?.hasError('required')"
                    >GearBox is required</span
                  >
                </mat-error>
              </div>
            </div>
            <select formControlName="gearBox">
              <option value="GearBox" selected>GearBox</option>
              <option value="automatic">Automatic</option>
              <option value="manual">Manual</option>
            </select>
          </div>
          <div class="input_box wheel_and_btnsbox">
            <div>
              <div class="input_title_box">
                <label class="label">Wheel</label>
                <div
                  *ngIf="
                    CardAddForm.get('wheel')?.invalid &&
                    (CardAddForm.get('wheel')?.dirty ||
                      CardAddForm.get('wheel')?.touched)
                  "
                >
                  <mat-error>
                    <span *ngIf="CardAddForm.get('wheel')?.hasError('required')"
                      >Wheel is required</span
                    >
                  </mat-error>
                </div>
              </div>
              <select formControlName="wheel">
                <option value="Wheel" selected>Wheel</option>
                <option value="front-wheel drive">Front-wheel drive</option>
                <option value="rear-wheel drive">Rear-wheel drive</option>
                <option value="all-wheel drive">All-wheel drive</option>
              </select>
            </div>
          </div>
        </div>
        <div class="addCard_input_bottom_row">
          <div class="input_box input_textarea_box">
            <label class="label">Details</label>
            <textarea
              formControlName="details"
              placeholder="e.g Powerful engine, iconic design..."
            ></textarea>
          </div>
          <div class="input_box input_image_box">
            <label class="label">Photo</label>
            <div class="image_display_box">
              <img [src]="saveCarImageUrl || '/assets/no-image.svg'" alt="" />
              <mat-progress-bar
                *ngIf="imageUploadProgressBar || isImageCompressing"
                [mode]="
                  imageUploadProgressBar ? 'determinate' : 'indeterminate'
                "
                [value]="imageUploadProgressBar"
              ></mat-progress-bar>
            </div>

            <input type="file" (change)="onFileChange($event)" />
          </div>
        </div>
        <div class="profile_btns_box">
          <div class="profile_card_btn_col2">
            <button
              [disabled]="
                !CardAddForm.valid ||
                isSubmitting ||
                imageUploadProgressBar !== 0 ||
                isImageCompressing
              "
              (click)="cardSaveBtn()"
              class="prf_card_save_btn"
            >
              {{ "Profile_pg_t12" | translate }}
            </button>
            <button (click)="cardCancelBtn()" class="prf_card_cancel_btn">
              {{ "Profile_pg_t11" | translate }}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
